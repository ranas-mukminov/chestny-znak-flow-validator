# üè∑Ô∏è Chestny ZNAK Flow Validator

[![CI](https://github.com/ranas-mukminov/chestny-znak-flow-validator/actions/workflows/ci.yml/badge.svg)](https://github.com/ranas-mukminov/chestny-znak-flow-validator/actions)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/Python-3.11%2B-blue)](https://www.python.org/)

üá∑üá∫ –†—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è | üá¨üáß [English version](README.md)

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø–æ—Ç–æ–∫–æ–≤ –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –≤ —Ä–æ—Å—Å–∏–π—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–µ ¬´–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö¬ª (–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å ‚Üí –æ–ø—Ç–æ–≤–∏–∫ ‚Üí —Ä–æ–∑–Ω–∏—Ü–∞). –ü—Ä–æ–µ–∫—Ç –ø–æ–º–æ–≥–∞–µ—Ç –±–∏–∑–Ω–µ—Å—É —Å–≤–µ—Ä—è—Ç—å –∑–∞–ø–∏—Å–∏ –æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è—Ö, –≤—ã—è–≤–ª—è—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–¥–æ–±–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –¥–ª—è —Ä–µ–≥—É–ª—è—Ç–æ—Ä–Ω–æ–≥–æ –∫–æ–º–ø–ª–∞–µ–Ω—Å–∞ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–ø–æ—Ä–æ–≤.

## –û–ø–∏—Å–∞–Ω–∏–µ

–í –†–æ—Å—Å–∏–∏ –º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (–ª–µ–∫–∞—Ä—Å—Ç–≤–∞, —Ç–∞–±–∞–∫, –æ–±—É–≤—å –∏ –¥—Ä.) –¥–æ–ª–∂–Ω—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É **¬´–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö¬ª**. –ö–æ–º–ø–∞–Ω–∏–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏, –æ–ø—Ç–æ–≤–∏–∫–∏, —Ä–∏—Ç–µ–π–ª–µ—Ä—ã ‚Äî –≤—ã–≥—Ä—É–∂–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–≤–æ–∏—Ö ERP/WMS-—Å–∏—Å—Ç–µ–º –∏ –æ–±—è–∑–∞–Ω—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –ì–ò–° –ú–¢ (–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤).

–≠—Ç–æ—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –∏–ª–∏ –∞–Ω–æ–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã–≥—Ä—É–∑–∫–∏ (CSV/XLSX/XML) –æ—Ç —Ä–∞–∑–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ü–µ–ø–æ—á–∫–∏ –ø–æ—Å—Ç–∞–≤–æ–∫, —Å—Ç—Ä–æ–∏—Ç –µ–¥–∏–Ω—ã–π –≥—Ä–∞—Ñ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π –∏ –≤—ã—è–≤–ª—è–µ—Ç:
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–¥—ã**, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –Ω–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –≤ –¥—Ä—É–≥–æ–π
- **–ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–¥—ã –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ ¬´–≤—ã–±—ã–ª–∏¬ª, –Ω–æ –≤—Å—ë –µ—â—ë —á–∏—Å–ª—è—Ç—Å—è –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ —Ä–æ–∑–Ω–∏—Ü—ã)
- **–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞** –º–µ–∂–¥—É –ø–∞—Ä—Ç–∏—è–º–∏ –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è–º–∏
- **–†–∞–∑—Ä—ã–≤—ã —Ü–µ–ø–æ—á–∫–∏**, –∫–æ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–∞–≤–∞ –≤–ª–∞–¥–µ–Ω–∏—è –Ω–µ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞–¥–ª–µ–∂–∞—â–∏–º –æ–±—Ä–∞–∑–æ–º

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è **–∞—É–¥–∏—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è**, **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö** –∏ **–æ–±—É—á–µ–Ω–∏—è/–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏** ‚Äî –æ–Ω –ù–ï –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –±–æ–µ–≤—ã–º API –ì–ò–° –ú–¢.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ò–º–ø–æ—Ä—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤**: –ü–∞—Ä—Å–∏–Ω–≥ CSV –æ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è, XLSX –æ—Ç –æ–ø—Ç–æ–≤–∏–∫–∞ –∏ XML –æ—Ç —Ä–æ–∑–Ω–∏—Ü—ã —Å –≥–∏–±–∫–∏–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä–∞—Ñ–∞**: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ü–µ–ø–æ—á–µ–∫ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –∏ –≤—ã—è–≤–ª–µ–Ω–∏–µ —Ç–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π**: –í—ã—è–≤–ª–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–¥–æ–≤, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤, –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ —Ä–∞–∑—Ä—ã–≤–æ–≤ —Ü–µ–ø–æ—á–∫–∏
- **–£–¥–æ–±–Ω—ã–µ –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞ –æ—Ç—á—ë—Ç—ã**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ markdown –∏–ª–∏ —Ç–µ–∫—Å—Ç–∞ —Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- **AI-–∏–Ω—Å–∞–π—Ç—ã** (–∑–∞–≥–ª—É—à–∫–∞): –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –ø—Ä–µ—Ç–µ–Ω–∑–∏–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ–º–ø–ª–∞–µ–Ω—Å—É
- **CLI –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ó–∞–ø—É—Å–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–π —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (`typer`) –∏–ª–∏ –ª—ë–≥–∫–∏–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ FastAPI
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `defusedxml` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ XML –∏ `pypdf>=3.9.0` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DoS-–∞—Ç–∞–∫
- **TDD-–ø–æ–¥—Ö–æ–¥**: –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —é–Ω–∏—Ç- –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å CI/CD —á–µ—Ä–µ–∑ GitHub Actions

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –≤ –≤–∏–¥–µ —á–∏—Å—Ç—ã—Ö, –º–æ–¥—É–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤:

```
cz_validator/
‚îú‚îÄ‚îÄ models.py              # –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Code, Movement, Batch, Discrepancy)
‚îú‚îÄ‚îÄ io_import/             # –ò–º–ø–æ—Ä—Ç–µ—Ä—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ (CSV, XLSX, XML) + –ø—Ä–æ—Ñ–∏–ª–∏ –º–∞–ø–ø–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ core/                  # –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ + –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –≥—Ä–∞—Ñ–∞)
‚îú‚îÄ‚îÄ ai/                    # AI-—Å–ª–æ–π (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–µ—Ç–µ–Ω–∑–∏–π, –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º)
‚îú‚îÄ‚îÄ cli/                   # CLI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –±–∞–∑–µ Typer
‚îî‚îÄ‚îÄ webapp/                # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ FastAPI (–∑–∞–≥–ª—É—à–∫–∞)
```

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö**:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª—ã –≤—ã–≥—Ä—É–∑–æ–∫ –æ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è/–æ–ø—Ç–æ–≤–∏–∫–∞/—Ä–æ–∑–Ω–∏—Ü—ã
2. –ò–º–ø–æ—Ä—Ç–µ—Ä—ã –ø–∞—Ä—Å—è—Ç —Ñ–∞–π–ª—ã ‚Üí –æ–±—ä–µ–∫—Ç—ã `Code`, `Movement`, `Batch`
3. –ü–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –≥—Ä–∞—Ñ–∞ —Å–æ–∑–¥–∞—ë—Ç —Ç–æ–ø–æ–ª–æ–≥–∏—é —Ü–µ–ø–æ—á–∫–∏ –ø–æ—Å—Ç–∞–≤–æ–∫
4. –ü—Ä–æ–≤–µ—Ä—è—é—â–∏–µ –º–æ–¥—É–ª–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç –≥—Ä–∞—Ñ ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –æ–±—ä–µ–∫—Ç—ã `Discrepancy`
5. AI-—Å–ª–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç —É–¥–æ–±–Ω—ã–µ –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞ –æ—Ç—á—ë—Ç—ã –∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –ø—Ä–µ—Ç–µ–Ω–∑–∏–π
6. –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å, markdown-—Ñ–∞–π–ª –∏–ª–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **–û–°**: Linux (Ubuntu 20.04+, Debian 11+, RHEL 8+, Rocky Linux 8+) –∏–ª–∏ macOS
- **Python**: 3.11 –∏–ª–∏ –≤—ã—à–µ
- **–û–ó–£**: –º–∏–Ω–∏–º—É–º 512 –ú–ë (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2 –ì–ë –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤)
- **–î–∏—Å–∫**: 100 –ú–ë –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ + –º–µ—Å—Ç–æ –¥–ª—è –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
- `typer>=0.9` ‚Äî CLI-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `fastapi>=0.109` ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≤–µ–±-API
- `pydantic>=1.10` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `openpyxl>=3.1` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ Excel-—Ñ–∞–π–ª–æ–≤
- `PyYAML>=6.0` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `pypdf>=3.9.0` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ PDF (–∑–∞—â–∏—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- `defusedxml>=0.7.1` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ XML

### –°–µ—Ç—å –∏ –¥–æ—Å—Ç—É–ø
- –í–Ω–µ—à–Ω–∏–µ API-–≤—ã–∑–æ–≤—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è (–≤—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è)
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ `pip install`

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/ranas-mukminov/chestny-znak-flow-validator.git
cd chestny-znak-flow-validator

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python3.11 -m venv venv
source venv/bin/activate  # –ù–∞ Windows: venv\Scripts\activate
pip install --upgrade pip
pip install .

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏
python -m cz_validator.cli.main validate \
  --producer examples/data/producer_export_sample.csv \
  --wholesaler examples/data/wholesaler_export_sample.xlsx \
  --retail examples/data/retail_export_sample.xml

# 4. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç
echo '{"total_codes": 1500, "discrepancies": 23}' > /tmp/aggregates.json
python -m cz_validator.cli.main generate-report /tmp/aggregates.json
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ü—Ä–∏–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –∏ –∞–Ω–æ–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –î–ª—è –±–æ–µ–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–≥—Ä—É–∑–∫–∏.

## –ü–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Ubuntu / Debian

```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.11 (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
sudo apt install -y python3.11 python3.11-venv python3.11-dev

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/ranas-mukminov/chestny-znak-flow-validator.git
cd chestny-znak-flow-validator

# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.11 -m venv venv
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç
pip install --upgrade pip
pip install .

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
pip install .[dev]
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ RHEL / Rocky Linux / AlmaLinux

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å EPEL –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python 3.11
sudo dnf install -y epel-release
sudo dnf install -y python3.11 python3.11-pip

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
git clone https://github.com/ranas-mukminov/chestny-znak-flow-validator.git
cd chestny-znak-flow-validator
python3.11 -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install .
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
docker build -t cz-validator:latest .

# –ó–∞–ø—É—Å—Ç–∏—Ç—å CLI-–∫–æ–º–∞–Ω–¥—É
docker run --rm -v $(pwd)/examples:/data cz-validator:latest \
  python -m cz_validator.cli.main validate \
  --producer /data/producer_export_sample.csv \
  --wholesaler /data/wholesaler_export_sample.xlsx \
  --retail /data/retail_export_sample.xml
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –í –¥–∞–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç Dockerfile. –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –µ–≥–æ, —Å–ª–µ–¥—É—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º Python.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü—Ä–æ—Ñ–∏–ª–∏ –º–∞–ø–ø–∏–Ω–≥–∞

–í–∞–ª–∏–¥–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø—Ä–æ—Ñ–∏–ª–∏ –º–∞–ø–ø–∏–Ω–≥–∞** –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∫ —Ä–∞–∑–Ω—ã–º —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ –∫–æ–ª–æ–Ω–æ–∫ –≤ ERP/WMS. –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—Ñ–∏–ª—è –≤ `cz_validator/io_import/mapping_profiles.py`:

```python
DEFAULT_CSV_MAPPING = {
    "code_column": "marking_code",      # –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –∫–æ–¥–∞ –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏
    "gtin_column": "gtin_14",           # –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä GTIN
    "batch_column": "batch_number",     # –ù–æ–º–µ—Ä –ø–∞—Ä—Ç–∏–∏
    "status_column": "current_status",  # –°—Ç–∞—Ç—É—Å –∫–æ–¥–∞
    "owner_column": "owner_inn",        # –ò–ù–ù –≤–ª–∞–¥–µ–ª—å—Ü–∞
}
```

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞ —Å–æ–∑–¥–∞–π—Ç–µ YAML-–∫–æ–Ω—Ñ–∏–≥ –≤ `examples/configs/`:

```yaml
# examples/configs/my_erp_mapping.yaml
csv:
  code_column: "–ö–æ–¥–ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∏"
  gtin_column: "GTIN"
  batch_column: "–ü–∞—Ä—Ç–∏—è"
  status_column: "–°—Ç–∞—Ç—É—Å"
  owner_column: "–ò–ù–ù_–≤–ª–∞–¥–µ–ª—å—Ü–∞"

xlsx:
  code_column: "Code"
  gtin_column: "Product_GTIN"
  # ... –∏ —Ç.–¥.
```

–ü–µ—Ä–µ–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥-—Ñ–∞–π–ª –∏–º–ø–æ—Ä—Ç–µ—Ä—É –≤ —Å–≤–æ—ë–º –∫–æ–¥–µ.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è –±–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è AI-—Ñ—É–Ω–∫—Ü–∏–π (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã):

```bash
# –ö–ª—é—á OpenAI API –¥–ª—è AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–æ–≤ (–±—É–¥—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
export OPENAI_API_KEY="sk-..."
# –ö–ª—é—á Anthropic API (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
export ANTHROPIC_API_KEY="sk-ant-..."
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ CLI

```bash
# –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç—Ä–∏ —ç—Ç–∞–ø–∞ —Ü–µ–ø–æ—á–∫–∏ –ø–æ—Å—Ç–∞–≤–æ–∫
python -m cz_validator.cli.main validate \
  --producer data/producer.csv \
  --wholesaler data/wholesaler.xlsx \
  --retail data/retail.xml

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–¥–æ–±–Ω—ã–π –¥–ª—è —á–µ–ª–æ–≤–µ–∫–∞ –æ—Ç—á—ë—Ç –∏–∑ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
python -m cz_validator.cli.main generate-report results/aggregates.json

# –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –ø—Ä–µ—Ç–µ–Ω–∑–∏–π (–∫–æ–º–∞–Ω–¥–∞-–∑–∞–≥–ª—É—à–∫–∞)
python -m cz_validator.cli.main export-claims
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=cz_validator --cov-report=html

# –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest tests/integration/

# –õ–∏–Ω—Ç–∏–Ω–≥ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
./scripts/lint.sh
./scripts/security_scan.sh
```

### –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–∑–∞–≥–ª—É—à–∫–∞)

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –∫ –º–æ–¥—É–ª—é webapp
python -m cz_validator.webapp.main

# –û—Ç–∫—Ä—ã—Ç—å UI –Ω–∞ http://localhost:8000
# (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –∑–∞–≥–ª—É—à–∫–∞; —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
```

### –ò–º–ø–æ—Ä—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤—ã–≥—Ä—É–∑–æ–∫

```python
from cz_validator.io_import.csv_importer import import_producer_csv
from cz_validator.io_import.xlsx_importer import import_wholesaler_xlsx
from cz_validator.io_import.xml_importer import import_retail_xml

# –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è
codes = import_producer_csv("my_producer_export.csv")

# –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –æ–ø—Ç–æ–≤–∏–∫–∞
movements = import_wholesaler_xlsx("my_wholesaler_export.xlsx")

# –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö —Ä–æ–∑–Ω–∏—Ü—ã
batches = import_retail_xml("my_retail_export.xml")
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏

```bash
cd chestny-znak-flow-validator
git pull origin main

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
source venv/bin/activate
pip install --upgrade .

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
pytest
```

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

- **v0.1.1**: –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `defusedxml` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ XML ‚Äî –æ–±–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ XML-–∏–º–ø–æ—Ä—Ç–µ—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ
- **v0.1.1**: –¢—Ä–µ–±—É–µ—Ç—Å—è `pypdf>=3.9.0` ‚Äî –≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏—è—Ö –µ—Å—Ç—å —É—è–∑–≤–∏–º–æ—Å—Ç–∏ DoS

## –õ–æ–≥–∏ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –õ–æ–≥–∏

–í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –≤ `stderr`. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–≤–æ—ë–º –∫–æ–¥–µ:

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –ü—Ä–æ–±–ª–µ–º–∞: `ModuleNotFoundError: No module named 'cz_validator'`
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–∏–ª–∏ `pip install .`

```bash
source venv/bin/activate
pip install .
```

#### –ü—Ä–æ–±–ª–µ–º–∞: `FileNotFoundError` –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –ø—Ä–∏–º–µ—Ä–æ–≤
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∏–∑ –∫–æ—Ä–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

```bash
cd /path/to/chestny-znak-flow-validator
python -m cz_validator.cli.main validate --producer $(pwd)/examples/data/producer_export_sample.csv
```

#### –ü—Ä–æ–±–ª–µ–º–∞: `UnicodeDecodeError` –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ CSV/XLSX
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8, –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É –≤ –∏–º–ø–æ—Ä—Ç–µ—Ä–µ.

#### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å `ImportError`
**–†–µ—à–µ–Ω–∏–µ**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install .[dev]
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–∞–µ—Ç –æ–± —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
**–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π:

```bash
pip install --upgrade pypdf defusedxml
```

## –ó–∞–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

- **–ê–Ω–æ–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤—Å–µ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Ñ–∞–π–ª—ã –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É, —Ñ–æ—Ä–º–∞—Ç—É –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- **–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –†–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `./scripts/security_scan.sh` –∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —É—è–∑–≤–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**: –ü—Ä–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (OAuth2, JWT) –∏ HTTPS
- **–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–≥–æ–≤–æ—Ä—É —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º ¬´–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö¬ª –∏ –§–ó-487

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **XML-bomb –∞—Ç–∞–∫–∏**: –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ `defusedxml` (v0.7.1+)
- **PDF DoS**: –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ `pypdf>=3.9.0` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞)
- **CSV-–∏–Ω—ä–µ–∫—Ü–∏–∏**: –ò–º–ø–æ—Ä—Ç–µ—Ä—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ñ–æ—Ä–º—É–ª—ã; –±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ Excel

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
chestny-znak-flow-validator/
‚îú‚îÄ‚îÄ cz_validator/           # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Code, Movement, Batch, Discrepancy)
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ io_import/          # –ò–º–ø–æ—Ä—Ç–µ—Ä—ã –¥–ª—è CSV, XLSX, XML + –ø—Ä–æ—Ñ–∏–ª–∏ –º–∞–ø–ø–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ core/               # –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (—Å—Ç–∞—Ç—É—Å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å)
‚îÇ   ‚îú‚îÄ‚îÄ ai/                 # AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø—Ä–µ—Ç–µ–Ω–∑–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ cli/                # CLI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Typer
‚îÇ   ‚îî‚îÄ‚îÄ webapp/             # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ FastAPI (–∑–∞–≥–ª—É—à–∫–∞)
‚îú‚îÄ‚îÄ tests/                  # –Æ–Ω–∏—Ç- –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îî‚îÄ‚îÄ integration/
‚îú‚îÄ‚îÄ examples/               # –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ data/               # –°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ CSV/XLSX/XML –≤—ã–≥—Ä—É–∑–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ configs/            # –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ—Ñ–∏–ª–µ–π –º–∞–ø–ø–∏–Ω–≥–∞
‚îÇ   ‚îî‚îÄ‚îÄ reports/            # –ü—Ä–∏–º–µ—Ä—ã –≤—ã—Ö–æ–¥–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤
‚îú‚îÄ‚îÄ scripts/                # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ª–∏–Ω—Ç–∏–Ω–≥, —Ç–µ—Å—Ç—ã, —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
‚îú‚îÄ‚îÄ .github/workflows/      # CI/CD (pytest, CodeQL, –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, Codex review)
‚îú‚îÄ‚îÄ pyproject.toml          # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ LICENSE                 # –õ–∏—Ü–µ–Ω–∑–∏—è Apache 2.0
‚îú‚îÄ‚îÄ LEGAL.md                # –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –æ–≥–æ–≤–æ—Ä–∫–∏ –∏ –∑–∞–º–µ—á–∞–Ω–∏—è –ø–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—é
‚îú‚îÄ‚îÄ SECURITY.md             # –ü–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –æ–± —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö
‚îú‚îÄ‚îÄ CONTRIBUTING.md         # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—á–∞—Å—Ç–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Codex Code Review
‚îî‚îÄ‚îÄ CHANGELOG.md            # –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π
```

## –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞

### –í–µ—Ä—Å–∏—è 0.2.0 (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI —á–µ—Ä–µ–∑ OpenAI/Anthropic –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ—Ç–µ–Ω–∑–∏–π
- –î–æ—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤, –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞)
- –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF –∏ Excel
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—ã–≥—Ä—É–∑–æ–∫ (JSON, EDI)

### –í–µ—Ä—Å–∏—è 0.3.0 (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (UI –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ —Å >1M –∫–æ–¥–æ–≤
- REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

–°–º. [GitHub Issues](https://github.com/ranas-mukminov/chestny-znak-flow-validator/issues) –¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∑–∞–¥–∞—á –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π.

## –ö–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞! –ü—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ—Å—å —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:

### –ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

1. **–û—Ç–∫—Ä–æ–π—Ç–µ issue** –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è –±–∞–≥–æ–≤, —Ñ—É–Ω–∫—Ü–∏–π –∏–ª–∏ —É–ª—É—á—à–µ–Ω–∏–π
2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è** –∏ —Å–æ–∑–¥–∞–π—Ç–µ feature-–≤–µ—Ç–∫—É
3. **–°–Ω–∞—á–∞–ª–∞ –Ω–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã** (TDD-–ø–æ–¥—Ö–æ–¥) –ø–µ—Ä–µ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π PR:
   ```bash
   ./scripts/lint.sh
   ./scripts/dev_run_all_tests.sh
   ./scripts/security_scan.sh
   ```
5. **–ó–∞–ø—Ä–æ—Å–∏—Ç–µ Codex Code Review**, –¥–æ–±–∞–≤–∏–≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π `@codex review` –∫ –≤–∞—à–µ–º—É PR
6. **–ò—Å–ø—Ä–∞–≤—å—Ç–µ –∑–∞–º–µ—á–∞–Ω–∏—è** –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CI –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

### –°—Ç–∏–ª—å –∫–æ–¥–∞
- –°–ª–µ–¥—É–π—Ç–µ **PEP 8** (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ª–∏–Ω—Ç–µ—Ä–æ–º)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **type hints** –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –º–µ—Ç–æ–¥–æ–≤
- –î–µ—Ä–∂–∏—Ç–µ –º–æ–¥—É–ª–∏ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏: `io_import` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞, `core` –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏, `ai` –¥–ª—è AI-—Ñ—É–Ω–∫—Ü–∏–π
- –ü–∏—à–∏—Ç–µ **docstrings** –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö API (PEP 257)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Codex Code Review
1. –í–∫–ª—é—á–∏—Ç–µ Codex Cloud –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö GitHub
2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Ñ–∏—á—É **Code review** –≤ –ø–∞–Ω–µ–ª–∏ Codex Cloud
3. –í PR –≤—ã–∑—ã–≤–∞–π—Ç–µ —Ä–µ–≤—å—é –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `@codex review` –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ-—Ä–µ–≤—å—é
4. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ª—é–±—ã–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–ª–∏ –ª–æ–≥–∏–∫–∏, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ Codex

–°–º. [CONTRIBUTING.md](CONTRIBUTING.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ **Apache License 2.0**. –°–º. [LICENSE](LICENSE) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

–í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ –≤–∫–ª—é—á–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∞–≤—Ç–æ—Ä—Å–∫–∏—Ö –ø—Ä–∞–≤–∞—Ö –∏ —Ç–µ–∫—Å—Ç–∞ –ª–∏—Ü–µ–Ω–∑–∏–∏.

## –ê–≤—Ç–æ—Ä –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ê–≤—Ç–æ—Ä**: [Ranas Mukminov](https://github.com/ranas-mukminov)

–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω, –∫–∞—Å—Ç–æ–º–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–∞—à–∏–º–∏ ERP/WMS-—Å–∏—Å—Ç–µ–º–∞–º–∏, –∞—É–¥–∏—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ—Å–µ—Ç–∏—Ç–µ **[run-as-daemon.ru](https://run-as-daemon.ru)** –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–≤—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ GitHub.

### –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏
- –ê—É–¥–∏—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –æ—Ü–µ–Ω–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º ¬´–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö¬ª
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ –∏–º–ø–æ—Ä—Ç–∞ –¥–ª—è 1–°, SAP –∏–ª–∏ –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã—Ö ERP-—Å–∏—Å—Ç–µ–º
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–∞ Grafana/Prometheus –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Ü–µ–ø–æ—á–µ–∫ –ø–æ—Å—Ç–∞–≤–æ–∫
- DevOps/SRE –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è CI/CD-–ø–∞–π–ø–ª–∞–π–Ω–æ–≤

---

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ù–ï —è–≤–ª—è–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ø—Ä–æ–¥—É–∫—Ç–æ–º ¬´–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö¬ª –∏–ª–∏ –µ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞. –û–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏ –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–µ SDK, –∑–∞–∫—Ä—ã—Ç—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–¥—ã –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏. –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –∏ –∞–Ω–æ–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ—Å—É—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–≤–æ–∏–º –¥–æ–≥–æ–≤–æ—Ä–∞–º —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º ¬´–ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö¬ª –∏ –§–ó-487. –°–º. [LEGAL.md](LEGAL.md) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.
